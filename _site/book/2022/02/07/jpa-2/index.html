<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
<meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
<meta http-equiv='X-UA-Compatible' content='IE=edge'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>


<meta name="description" content="✓︎ 라이브러리와 프로젝트 구조
✓︎ 객체 매핑 시작
✓︎ persistence.xml 설정
✓︎ 애플리케이션 개발
" />
<meta property="og:description" content="✓︎ 라이브러리와 프로젝트 구조
✓︎ 객체 매핑 시작
✓︎ persistence.xml 설정
✓︎ 애플리케이션 개발
" />

<meta name="author" content="Chloe" />


<meta property="og:title" content="자바 ORM 표준 JPA 프로그래밍 - (2) JPA 시작" />
<meta property="twitter:title" content="자바 ORM 표준 JPA 프로그래밍 - (2) JPA 시작" />



    <title>자바 ORM 표준 JPA 프로그래밍 - (2) JPA 시작 – Chloe – 조금씩, 천천히, 꾸준히</title>

    <link rel="stylesheet" type="text/css" href="/style.css"/>
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/ress/dist/ress.min.css"/>
    <link rel="shortcut icon" type="image/x-icon" href="/assets/image/favicon.ico">
    <link rel="icon" type="image/x-icon" href="/assets/image/favicon.ico">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-config" content="/assets/image/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <link rel="alternate" type="application/rss+xml" title="Chloe - 조금씩, 천천히, 꾸준히" href="/feed.xml"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css" integrity="sha256-XoaMnoYC5TH6/+ihMEnospgm0J1PM/nioxbOUdnM8HY=" crossorigin="anonymous" media="print" onload="this.media='all'"/>
    <link rel="stylesheet" href="https://cdn.plyr.io/3.6.5/plyr.css" media="print" onload="this.media='all'"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" media="print" onload="this.media='all'"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous" media="print" onload="this.media='all'"/>

  </head>

  <body>
    </div>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="/assets/image/avatar.png" width="70" height="70" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">Chloe</a></h1>
            <p class="site-description">조금씩, 천천히, 꾸준히</p>
          </div>

          <nav class="nav-menu">
            
  <a class="nav-menu-item"<a href="/">Blog</a>

  <a class="nav-menu-item"<a href="/tags">Tag</a>

  <a class="nav-menu-item"<a href="/about">About</a>

  <a class="nav-menu-item"<a href="/search">Search</a>


          </nav>
        </header>
      </div>
    </div>

    <div class="post-container">
      <div id="category" class="category">
        <aside>
          
          
            
              
            
          
            
              
              <a class="category-link " href="/category/Book/">
                <i class="fa fa-tags fa-fw" aria-hidden="true"></i>&nbspBook
              </a>
              
            
          
            
              
              <a class="category-link " href="/category/Daily/">
                <i class="fa fa-tags fa-fw" aria-hidden="true"></i>&nbspDaily
              </a>
              
            
          
            
              
              <a class="category-link " href="/category/Programming/">
                <i class="fa fa-tags fa-fw" aria-hidden="true"></i>&nbspProgramming
              </a>
              
            
          
            
          
            
              
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        </aside>
      </div>
      <div id="main" role="main" class="content">
        <article class="post">
  <div class="post-title">

    <p class="title">자바 ORM 표준 JPA 프로그래밍 - (2) JPA 시작</p>

    <div class="post-option">
      <!--<div class="post-categories">
        <i class="fa fa-tags fa-fw" aria-hidden="true"></i>&nbsp;Tags:&nbsp;
        
        
        <a class="categories-button"<a href="/categories/#Book">Book</a>
        
        
      </div>-->
      <div class="date">
        <i class="fa fa-calendar fa-fw" aria-hidden="true"></i>&nbsp;Date: 2022-02-07
      </div>
    </div>
  </div>

  <div class="entry">
    <p class="notice-list"><a href="#3-라이브러리와-프로젝트-구조">✓︎ 라이브러리와 프로젝트 구조</a><br />
<a href="#4-객체-매핑-시작">✓︎ 객체 매핑 시작</a><br />
<a href="#5-persistencexml-설정">✓︎ persistence.xml 설정</a><br />
<a href="#6-애플리케이션-개발">✓︎ 애플리케이션 개발</a></p>

<h3 id="1-이클립스-설치와-프로젝트-불러오기">1. 이클립스 설치와 프로젝트 불러오기</h3>

<p>『자바 ORM 표준 JPA 프로그래밍』 <strong class="case-link"><a href="https://github.com/holyeye/jpabook">예제 프로젝트</a></strong></p>

<h3 id="2-h2-데이터베이스-설치">2. H2 데이터베이스 설치</h3>

<p>H2 Database 홈페이지에서 다운로드 <strong class="case-link"><a href="https://hothoony.tistory.com/890">H2 설치 참고</a></strong></p>

<h3 id="3-라이브러리와-프로젝트-구조">3. 라이브러리와 프로젝트 구조</h3>

<ul>
  <li>JPA 구현체로 하이버네이트를 사용하기 위한 핵심 라이브러리
    <ul>
      <li><strong class="bg-orange outline">hibernate-core</strong> : 하이버네이트 라이브러리</li>
      <li><strong class="bg-orange outline">hibernate-entitymanager</strong> : 하이버네이트가 JPA 구현체로 동작하도록 JPA 표준을 구현한 라이브러리</li>
      <li><strong class="bg-orange outline">hibernate-jpa-2.1-api</strong> : JPA 2.1 표준 API를 모아둔 라이브러리</li>
    </ul>
  </li>
</ul>

<h3 id="4-객체-매핑-시작">4. 객체 매핑 시작</h3>

<ul>
  <li>
    <p><strong class="bg-ly">@Entity</strong><br />
이 클래스를 테이블과 매핑한다고 JPA에게 알려준다. <code class="language-plaintext highlighter-rouge">@Entity</code>가 사용된 클래스를 엔티티 클래스라고 한다.</p>
  </li>
  <li>
    <p><strong class="bg-ly">@Table</strong><br />
엔티티 클래스에 매핑할 테이블 정보를 알려준다. <code class="language-plaintext highlighter-rouge">@Table</code>을 생략하면 클래스 이름을 테이블 이름으로 매핑한다. <code class="language-plaintext highlighter-rouge">name</code> 속성을 사용하여 원하는 테이블 명을 지정할 수 있다.</p>
  </li>
  <li>
    <p><strong class="bg-ly">@Id</strong><br />
엔티티 클래스의 필드를 테이블의 기본키(Primary Key)에 매핑한다. <code class="language-plaintext highlighter-rouge">@Id</code>가 사용된 필드를 식별자 필드라고 한다.</p>
  </li>
  <li>
    <p><strong class="bg-ly">@Column</strong><br />
필드를 컬럼에 매핑한다. <code class="language-plaintext highlighter-rouge">name</code> 속성을 사용하여 원하는 컬럼명을 지정할 수 있다.</p>
  </li>
  <li>
    <p><strong class="bg-ly">매핑 정보가 없는 필드</strong><br />
매핑 어노테이션을 생략하면 필드명을 사용해서 컬럼명으로 매핑한다.</p>

    <p class="notice">JPA 어노테이션의 패키지는 javax.persistence 이다.</p>
  </li>
</ul>

<h2 id="5-persistencexml-설정">5. persistence.xml 설정</h2>

<ul>
  <li>
    <p>JPA는 persistence.xml을 사용해서 필요한 설정 정보를 관리한다. 이 설정파일이 META-INF/persistence.xml 클래스 패스 경로에 있으면 별도의 설정 없이 JPA가 인식할 수 있다.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">&lt;persistence-unit name="jpabook"&gt;</code><br />
JPA 설정은 영속성 유닛이라는 것부터 시작하는데 일반적으로 연결할 데이터베이스당 하나의 영속성 유닛을 등록한다. 영속성 유닛에는 고유한 이름을 부여해야 한다.</p>
  </li>
  <li>JPA 표준 속성
    <ul>
      <li><code class="language-plaintext highlighter-rouge">javax.persistence.jdbc.driver</code> : JDBC 드라이버</li>
      <li><code class="language-plaintext highlighter-rouge">javax.persistence.jdbc.user</code> : 데이터베이스 접속 아이디</li>
      <li><code class="language-plaintext highlighter-rouge">javax.persistence.jdbc.passowrd</code> : 데이터베이스 접속 비밀번호</li>
      <li><code class="language-plaintext highlighter-rouge">javax.persistence.jdbc.url</code> : 데이터베이스 접속 URL</li>
      <li class="blank half"></li>
    </ul>
  </li>
  <li>하이버네이트 속성
    <ul>
      <li>hibernate.dialect : 데이터베이스 방언(Dialect)설정</li>
      <li><code class="language-plaintext highlighter-rouge">hibernate.show_sql</code> : 하이버네이트가 실행한 SQL을 출력한다.</li>
      <li><code class="language-plaintext highlighter-rouge">hibernate.formt_sql</code> : 하이버네이트가 실행한 SQL을 출력할 때 보기 쉽게 정렬한다.</li>
      <li><code class="language-plaintext highlighter-rouge">hibernate.use_sql_comments</code> : 쿼리를 출력할 때 주석도 함께 출력한다.</li>
      <li><code class="language-plaintext highlighter-rouge">hibernate_id.new_generator_mappings</code> : JPA 표준에 맞춘 새로운 키 생성 전략을 사용한다.</li>
    </ul>
  </li>
  <li>
    <p>JPA 표준 속성은 특정 구현체에 종속되지 않는다. 반면에 하이버네이트 전용 속성은 하이버네이트에서만 사용할 수 있다.</p>
  </li>
  <li>
    <p>SQL 표준을 지키지 않거나 특정 데이터베이스만의 고유한 기능을 방언(Dialect)이라고 한다.</p>

    <p><img src="https://t1.daumcdn.net/cfile/tistory/99174F4F5B477E830D" alt="" class="center" width="60%" /></p>
  </li>
</ul>

<h3 id="6-애플리케이션-개발">6. 애플리케이션 개발</h3>

<h4 id="️-엔티티-매니저-설정">▪️ 엔티티 매니저 설정</h4>

<p><img src="https://t1.daumcdn.net/cfile/tistory/9990C7455B477EFE37" alt="" class="center" width="55%" /></p>

<ul>
  <li>
    <p><strong class="bg-lavender">엔티티 매니저 팩토리</strong><br />
<strong>엔티티 매니저 팩토리는 애플리케이션 전체에서 딱 한번만 생성하고 공유해서 사용해야 한다.</strong></p>
  </li>
  <li>
    <p><strong class="bg-lavender">엔티티 매니저</strong>  <br />
JPA의 기능 대부분은 엔티티 매너저가 제공한다.
엔티티 매니저는 내부에 데이터소스(데이터베이스 커넥션)를 유지하면서 데이터베이스와 통신한다.
<strong>엔티티 매니저는 데이터베이스 커넥션과 밀접한 관계가 있으므로 스레드 간에 공유하거나 재사용하면 안된다.</strong></p>
  </li>
</ul>

<h4 id="️-트랜잭션-관리">▪️ 트랜잭션 관리</h4>

<ul>
  <li>JPA를 사용하면 항상 트랜잭션 안에서 데이터를 변경해야 한다. <strong>트랜잭션 없이 데이터를 변경하면 예외가 발생한다.</strong></li>
</ul>

<h4 id="️-jpql">▪️ JPQL</h4>

<ul>
  <li>JPA는 SQL을 추상화한 JPAL이라는 객체지향 쿼리 언어를 제공한다.</li>
  <li>JPQL은 엔티티 객체를 대상으로 쿼리한다. 쉽게 이야기해서 클래스와 필드를 대상으로 쿼리한다.</li>
  <li>JPQL은 데이터베이스 테이블을 전혀 알지 못하고 엔티티 객체를 참조한다.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//목록 조회</span>
<span class="nc">TypedQuery</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQurery</span><span class="o">(</span><span class="s">"select m from Member m"</span><span class="o">,</span> <span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">members</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="na">getResultLiost</span>
</code></pre></div></div>

<div class="post-reference">
   <p>Reference</p>
   <a href="https://serverwizard.tistory.com/22">자바 ORM 표준 JPA</a>
</div>

  </div>

</article>

      </div>
    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer"><div class="copyright">
            
            <p>Copyright &copy; 2022 Chloe.</p>
            
          </div>    
        </footer>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/js/glightbox.min.js"></script>
    <script type="text/javascript">
      const lightbox = GLightbox({
          touchNavigation: true,
          loop: true,
          autoplayVideos: true
      });
    </script>

    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.js" integrity="sha384-GxNFqL3r9uRJQhR+47eDxuPoNE7yLftQM8LcxzgS4HT73tp970WS/wV5p8UzCOmb" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/auto-render.min.js"
            onload="renderMathInElement(document.body,{
                    delimiters: [
                    { left: '$$',  right: '$$',  display: true  },
                    { left: '$',   right: '$',   display: false },
                    { left: '\\[', right: '\\]', display: true  },
                    { left: '\\(', right: '\\)', display: false }
                    ]});">
    </script>
  </body>
</html>
